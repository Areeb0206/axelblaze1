<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <title>A Single Page Application</title>

    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="style.css">

    <!--  -->

</head>

<body onload="startTime()">

    <main>

        <div class="page active" id="home">

            <h1>Calculator</h1>

            <ol>

                <li><a href="#" id1="home" class="nav-link">Calculator</a></li>
  <li><a href="#" id1="list" class="nav-link">Clock</a></li>
     <li><a href="#" id1="detail" class="nav-link">Game</a></li>
     </ol>
    
<form name='calc' style="text-align: center;background: black;width: 60%;height: 60%;position: relative;left: 30%;top: -100px;">
  <br>

<input type="" id=cal  value=Calculator style="text-align: center;background-color: black;color: white;font-size: 50px;border: none;font-family: interlude"><br><br>  
<input type="" id="display" name="answer" style="font-size: 30px;color: black"><br><br>

<input type="button"  name="" value=1 id =1 onclick="one()" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
<input type="button"  name="" value=2 id=2 onclick="two()" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white ;font-size: 30px; ">
<input type="button"  name="" value=3 onclick="calc.answer.value+='3'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
<input type="button"  name="" value=+ onclick="calc.answer.value+='+'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;"><br>
 <input type="button"  name="" value=4 onclick="calc.answer.value+='4'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
 <input type="button"  name="" value=5 onclick="calc.answer.value+='5'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
 <input type="button"  name="" value=6 onclick="calc.answer.value+='6'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
 <input type="button"  name="" value=- onclick="calc.answer.value+='-'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;"><br>
 <input type="button"  name="" value=7 onclick="calc.answer.value+='7'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
 <input type="button"  name="" value=8 onclick="calc.answer.value+='8'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
 <input type="button"  name=""  style="font-size: 30px;width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white" value=9 onclick="calc.answer.value+='9'">
 <input type="button"  name="" value=* id=* onclick="mult()" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;"><br>

<input type="button"  name="" value=C onclick="calc.answer.value=' '"  style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;"> 
<input type="button"  name="" value=0 id=0 onclick="zero()" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
<input type="button"  name="" value== id=cal onclick="calc.answer.value=eval(calc.answer.value)" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;">
<input type="button"  name="" value=/ onclick="calc.answer.value+='/'" style="width: 60px;height: 60px;border-radius: 10%;background: transparent;color:white;font-size: 30px;"><br><br><br>









</form> </div>
     </div>




        <div class="page" id="list">

            <h1>Clock</h1>

            <ol>

                <li><a href="#" id1="home" class="nav-link">Calculator</a></li>

                <li><a href="#" id1="list" class="nav-link">Clock</a></li>
                  <div id="txt"></div>
                    <div id="txt1"></div>
                <li><a href="#" id1="detail" class="nav-link">Game</a></li>

            </ol>

        </div>

        

        <div class="page" id="detail">

            <h1>Game</h1>

            <ol>

                <li><a href="#" id1="home" class="nav-link">Calculator</a></li>

                <li><a href="#" id1="list" class="nav-link">Clock</a></li>

                <li><a href="#" id1="detail" class="nav-link">Game</a></li>
   <div class="wrapper clearfix">
            <div class="player-0-panel active">
                <div class="player-name" id="name-0">Player 1</div>
                <div class="player-score" id="score-0">43</div>
                <div class="player-current-box">
                    <div class="player-current-label">Current</div>
                    <div class="player-current-score" id="current-0">11</div>
                </div>
            </div>
            
            <div class="player-1-panel">
                <div class="player-name" id="name-1">Player 2</div>
                <div class="player-score" id="score-1">72</div>
                <div class="player-current-box">
                    <div class="player-current-label">Current</div>
                    <div class="player-current-score" id="current-1">0</div>
                </div>
            </div>
            
            <button class="btn-new"><i class="ion-ios-plus-outline"></i>New game</button>
            <button class="btn-roll"><i class="ion-ios-loop"></i>Roll dice</button>
            <button class="btn-hold"><i class="ion-ios-download-outline"></i>Hold</button>
            
            <input type="text" placeholder="Final score" class="final-score">
            
            <img src="dice-5.png" alt="Dice" class="dice" >
        </div>
            </ol>

        </div>

        

    </main>
<script type="text/javascript">
  /*
GAME RULES:

- The game has 2 players, playing in rounds
- In each turn, a player rolls a dice as many times as he whishes. Each result get added to his ROUND score
- BUT, if the player rolls a 1, all his ROUND score gets lost. After that, it's the next player's turn
- The player can choose to 'Hold', which means that his ROUND score gets added to his GLBAL score. After that, it's the next player's turn
- The first player to reach 100 points on GLOBAL score wins the game

*/

var scores, roundScore, activePlayer, gamePlaying;

init();


document.querySelector('.btn-roll').addEventListener('click', function() {
    if(gamePlaying) {
        // 1. Random number
        var dice = Math.floor(Math.random() * 6) + 1;

        //2. Display the result
        var diceDOM = document.querySelector('.dice');
        diceDOM.style.display = 'block';
        diceDOM.src = 'dice-' + dice + '.png';


        //3. Update the round score IF the rolled number was NOT a 1
        if (dice !== 0) {
            //Add score

            roundScore += dice;
            document.querySelector('#current-' + activePlayer).textContent = roundScore;
        } else {
            //Next player
            nextPlayer();
        }
    }    
});


document.querySelector('.btn-hold').addEventListener('click', function() {
    if (gamePlaying) {
        // Add CURRENT score to GLOBAL score
        scores[activePlayer] += roundScore;

        // Update the UI
        document.querySelector('#score-' + activePlayer).textContent = scores[activePlayer];

        // Check if player won the game
        if (scores[activePlayer] >= 20) {
            document.querySelector('#name-' + activePlayer).textContent = 'Winner!';
            document.querySelector('.dice').style.display = 'none';
            document.querySelector('.player-' + activePlayer + '-panel').classList.add('winner');
            document.querySelector('.player-' + activePlayer + '-panel').classList.remove('active');
            gamePlaying = false;
        } else {
            //Next player
            nextPlayer();
        }
    }
});


function nextPlayer() {
    //Next player
    activePlayer === 0 ? activePlayer = 1 : activePlayer = 0;
    roundScore = 0;

    document.getElementById('current-0').textContent = '0';
    document.getElementById('current-1').textContent = '0';

    document.querySelector('.player-0-panel').classList.toggle('active');
    document.querySelector('.player-1-panel').classList.toggle('active');

    //document.querySelector('.player-0-panel').classList.remove('active');
    //document.querySelector('.player-1-panel').classList.add('active');

    document.querySelector('.dice').style.display = 'none';
}

document.querySelector('.btn-new').addEventListener('click', init);

function init() {
    scores = [0, 0];
    activePlayer = 0;
    roundScore = 0;
    gamePlaying = true;
    
    document.querySelector('.dice').style.display = 'none';

    document.getElementById('score-0').textContent = '0';
    document.getElementById('score-1').textContent = '0';
    document.getElementById('current-0').textContent = '0';
    document.getElementById('current-1').textContent = '0';
    document.getElementById('name-0').textContent = 'Player 1';
    document.getElementById('name-1').textContent = 'Player 2';
    document.querySelector('.player-0-panel').classList.remove('winner');
    document.querySelector('.player-1-panel').classList.remove('winner');
    document.querySelector('.player-0-panel').classList.remove('active');
    document.querySelector('.player-1-panel').classList.remove('active');
    document.querySelector('.player-0-panel').classList.add('active');
}

//document.querySelector('#current-' + activePlayer).textContent = dice;
//document.querySelector('#current-' + activePlayer).innerHTML = '<em>' + dice + '</em>';
//var x = document.querySelector('#score-0').textContent;








/*
YOUR 3 CHALLENGES
Change the game to follow these rules:

1. A player looses his ENTIRE score when he rolls two 6 in a row. After that, it's the next player's turn. (Hint: Always save the previous dice roll in a separate variable)
2. Add an input field to the HTML where players can set the winning score, so that they can change the predefined score of 100. (Hint: you can read that value with the .value property in JavaScript. This is a good oportunity to use google to figure this out :)
3. Add another dice to the game, so that there are two dices now. The player looses his current score when one of them is a 1. (Hint: you will need CSS to position the second dice, so take a look at the CSS code for the first one.)
*/

	//CLOCK
	function startTime() {
  var today = new Date();
  var h = today.getHours();h

  var m = today.getMinutes();
  var s = today.getSeconds();
  m = checkTime(m);
  s = checkTime(s); 
    h = checkTime(h);

  document.getElementById('txt').innerHTML =
  h + ":" + m + ":" + s;
  document.getElementById('txt1').innerHTML="todays Date="+today
  var t = setTimeout(startTime, 500);
}
function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}




//SPA
	const app = {

    pages: [],

    show: new Event('show'),

    init: function(){

        app.pages = document.querySelectorAll('.page').forEach((pg)=>{

        

            pg.addEventListener('show', app.pageShown);

        })
        document.querySelectorAll('.nav-link').forEach((link)=>{

            link.addEventListener('click', e=>{//mouseover

        e.preventDefault();

        let currentPage = e.target.getAttribute('id1');

        document.querySelector('.active').classList.remove('active');

        document.getElementById(currentPage).classList.add('active');

        console.log(currentPage)
   

        history.pushState({}, currentPage, `#${currentPage}`);

        document.getElementById(currentPage).dispatchEvent(app.show);


            });

        })

        history.replaceState( {}, 'Home', '#home');//{}

        document.addEventListener('popstate', app.poppin);

    },

   

    pageShown: function(ev){

        console.log('Page', ev.target.id, 'just shown');

/*let h1 = ev.target.querySelector('h1');

        h1.classList.add('big')

        setTimeout((h)=>{

            h.classList.remove('big');

        }, 1200, h1);*/

    },

    poppin: function(ev){

        console.log(location.hash, 'popstate event');

        let hash = location.hash.replace('#' ,'');

        document.querySelector('.active').classList.remove('active');

        document.getElementById(hash).classList.add('active');

        console.log(hash)

        //history.pushState({}, currentPage, `#${currentPage}`);

        document.getElementById(hash).dispatchEvent(app.show);

    }

}
document.addEventListener('DOMContentLoaded', app.init);



//Calcultor
	function zero() {

       var zer=document.getElementById("0").value='0';
       document.getElementById('display').value+=zer;
}
		function one() {

       var one=document.getElementById("1").value='1';
       document.getElementById('display').value+=one;
       document.addEventListener('keypress',e=>{
       	if(e.keyCode===49)
       	{  
       		var bp='1';
       		document.getElementById('display').value=1;

       	}
       })


	}
	function two() {

       var two=document.getElementById("2").value='2';
       document.getElementById('display').value+=two;


	}
	function mult() {

       var mul=document.getElementById("*").value='*';
       document.getElementById('display').value+=mul;
	}

</script>

</body>

</html>